<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>North American Barbershop Directory</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .stat {
            text-align: center;
            padding: 10px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 25px;
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: transform 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-2px);
        }

        .stat .number {
            font-size: 1.5rem;
            font-weight: 800;
            display: block;
        }

        .controls {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin: 30px auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .control-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .card h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
            line-height: 1.3;
        }

        .country-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }

        .country-usa { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .country-canada { background: linear-gradient(45deg, #e67e22, #d35400); }
        .country-mexico { background: linear-gradient(45deg, #27ae60, #229954); }

        .card-info {
            margin-bottom: 15px;
        }

        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #666;
        }

        .info-item .icon {
            width: 18px;
            height: 18px;
            margin-right: 10px;
            opacity: 0.7;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .stars {
            color: #f39c12;
            font-size: 1.1rem;
        }

        .rating-text {
            color: #666;
            font-size: 0.9rem;
        }

        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
            flex: 1;
            text-align: center;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .no-results h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #888;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1rem;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .page-btn {
            padding: 10px 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .page-btn:hover,
        .page-btn.active {
            background: #667eea;
            color: white;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .stats-bar {
                gap: 15px;
            }

            .stat {
                padding: 8px 16px;
            }

            .control-row {
                grid-template-columns: 1fr;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .card-actions {
                flex-direction: column;
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            color: #667eea;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .detail-section p {
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>🪒 North American Barbershop Directory</h1>
            <p>Discover quality barbershops across the USA, Canada, and Mexico</p>
            
            <div class="stats-bar">
                <div class="stat">
                    <span class="number" id="totalCount">0</span>
                    <span>Total Barbershops</span>
                </div>
                <div class="stat">
                    <span class="number" id="usaCount">0</span>
                    <span>USA</span>
                </div>
                <div class="stat">
                    <span class="number" id="canadaCount">0</span>
                    <span>Canada</span>
                </div>
                <div class="stat">
                    <span class="number" id="mexicoCount">0</span>
                    <span>Mexico</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="controls">
            <div class="control-row">
                <div class="form-group">
                    <label for="searchInput">🔍 Search Barbershops</label>
                    <input type="text" id="searchInput" placeholder="Search by name, address, or city...">
                </div>
                <div class="form-group">
                    <label for="countryFilter">🌍 Country</label>
                    <select id="countryFilter">
                        <option value="">All Countries</option>
                        <option value="USA">United States</option>
                        <option value="Canada">Canada</option>
                        <option value="Mexico">Mexico</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ratingFilter">⭐ Minimum Rating</label>
                    <select id="ratingFilter">
                        <option value="">Any Rating</option>
                        <option value="4.5">4.5+ Stars</option>
                        <option value="4.0">4.0+ Stars</option>
                        <option value="3.5">3.5+ Stars</option>
                        <option value="3.0">3.0+ Stars</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn" onclick="clearFilters()">Clear Filters</button>
                </div>
            </div>
            <div class="control-row">
                <div class="form-group">
                    <label for="sortBy">📊 Sort By</label>
                    <select id="sortBy">
                        <option value="name">Name (A-Z)</option>
                        <option value="rating">Highest Rated</option>
                        <option value="reviews">Most Reviews</option>
                        <option value="country">Country</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="resultsPerPage">📄 Results Per Page</label>
                    <select id="resultsPerPage">
                        <option value="12">12 per page</option>
                        <option value="24">24 per page</option>
                        <option value="48">48 per page</option>
                        <option value="96">96 per page</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-secondary" onclick="generateSampleData()">Load Sample Data</button>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn" onclick="exportResults()">Export Results</button>
                </div>
            </div>
        </div>

        <div id="loadingMessage" class="loading">
            <div class="spinner"></div>
            Loading barbershop data...
        </div>

        <div id="resultsCount" style="text-align: center; margin: 20px 0; font-weight: 600; color: #666; display: none;"></div>

        <div id="barbershopGrid" class="grid"></div>

        <div id="noResults" class="no-results" style="display: none;">
            <h3>No barbershops found</h3>
            <p>Try adjusting your search criteria or filters</p>
        </div>

        <div id="pagination" class="pagination"></div>
    </div>

    <!-- Modal for detailed view -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        let allBarbershops = [];
        let filteredBarbershops = [];
        let currentPage = 1;
        let itemsPerPage = 12;

        // Sample data generator
        function generateSampleData() {
            const sampleNames = [
                "Classic Cuts Barbershop", "The Gentleman's Den", "Vintage Barber Co.", "Sharp Edge Barbershop",
                "Old School Barber", "Modern Man Barbershop", "The Barber's Chair", "Precision Cuts",
                "Barber & Co.", "The Cutting Room", "Traditional Barbershop", "Elite Barber Lounge",
                "Heritage Barbershop", "The Barber Station", "Crown Barbershop", "Urban Barber",
                "The Shave Cave", "Clipper & Comb", "Barber's Guild", "The Grooming Lounge"
            ];

            const cities = {
                USA: ["New York, NY", "Los Angeles, CA", "Chicago, IL", "Houston, TX", "Phoenix, AZ", "Philadelphia, PA"],
                Canada: ["Toronto, ON", "Vancouver, BC", "Montreal, QC", "Calgary, AB", "Ottawa, ON", "Edmonton, AB"],
                Mexico: ["Mexico City, CDMX", "Guadalajara, JAL", "Monterrey, NL", "Cancún, QR", "Tijuana, BC", "Mérida, YUC"]
            };

            allBarbershops = [];
            
            for (let i = 0; i < 150; i++) {
                const countries = ["USA", "Canada", "Mexico"];
                const country = countries[Math.floor(Math.random() * countries.length)];
                const cityList = cities[country];
                const city = cityList[Math.floor(Math.random() * cityList.length)];
                
                const barbershop = {
                    place_id: `sample_${i}`,
                    name: sampleNames[Math.floor(Math.random() * sampleNames.length)] + (i > 19 ? ` ${Math.floor(i/20)}` : ''),
                    address: `${Math.floor(Math.random() * 9999) + 1} ${['Main St', 'Oak Ave', 'First St', 'Broadway', 'Park Ave'][Math.floor(Math.random() * 5)]}, ${city}`,
                    phone: `(${Math.floor(Math.random() * 900) + 100}) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`,
                    website: Math.random() > 0.3 ? `https://www.${sampleNames[Math.floor(Math.random() * sampleNames.length)].toLowerCase().replace(/\s+/g, '')}.com` : '',
                    rating: Math.round((Math.random() * 2 + 3) * 10) / 10,
                    total_ratings: Math.floor(Math.random() * 500) + 10,
                    price_level: Math.floor(Math.random() * 4) + 1,
                    business_status: Math.random() > 0.1 ? 'OPERATIONAL' : 'CLOSED_TEMPORARILY',
                    country: country,
                    hours: generateRandomHours(),
                    open_now: Math.random() > 0.3,
                    recent_review: generateRandomReview(),
                    recent_review_rating: Math.floor(Math.random() * 5) + 1,
                    latitude: (Math.random() * 60 + 25).toFixed(6),
                    longitude: (Math.random() * 60 - 130).toFixed(6)
                };
                
                allBarbershops.push(barbershop);
            }

            updateStats();
            applyFilters();
            document.getElementById('loadingMessage').style.display = 'none';
        }

        function generateRandomHours() {
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const hours = [];
            
            days.forEach(day => {
                if (day === 'Sunday' && Math.random() > 0.6) {
                    hours.push(`${day}: Closed`);
                } else {
                    const open = Math.floor(Math.random() * 4) + 8; // 8-11 AM
                    const close = Math.floor(Math.random() * 4) + 17; // 5-8 PM
                    hours.push(`${day}: ${open}:00 AM – ${close > 12 ? close - 12 : close}:00 ${close >= 12 ? 'PM' : 'AM'}`);
                }
            });
            
            return hours.join('; ');
        }

        function generateRandomReview() {
            const reviews = [
                "Great haircut and friendly service! Will definitely be back.",
                "Professional barbers who know their craft. Highly recommend!",
                "Clean shop with experienced staff. Good value for money.",
                "Traditional barbershop with modern techniques. Love it!",
                "Best barbershop in the area. Great attention to detail.",
                "Friendly atmosphere and skilled barbers. Five stars!",
                "Quick service without compromising quality. Impressed!",
                "Old-school charm with new-school skills. Perfect combination."
            ];
            return reviews[Math.floor(Math.random() * reviews.length)];
        }

        function updateStats() {
            const total = allBarbershops.length;
            const usa = allBarbershops.filter(b => b.country === 'USA').length;
            const canada = allBarbershops.filter(b => b.country === 'Canada').length;
            const mexico = allBarbershops.filter(b => b.country === 'Mexico').length;

            document.getElementById('totalCount').textContent = total;
            document.getElementById('usaCount').textContent = usa;
            document.getElementById('canadaCount').textContent = canada;
            document.getElementById('mexicoCount').textContent = mexico;
        }

        function applyFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const countryFilter = document.getElementById('countryFilter').value;
            const ratingFilter = parseFloat(document.getElementById('ratingFilter').value) || 0;
            const sortBy = document.getElementById('sortBy').value;

            filteredBarbershops = allBarbershops.filter(barbershop => {
                const matchesSearch = !searchTerm || 
                    barbershop.name.toLowerCase().includes(searchTerm) ||
                    barbershop.address.toLowerCase().includes(searchTerm);
                
                const matchesCountry = !countryFilter || barbershop.country === countryFilter;
                const matchesRating = barbershop.rating >= ratingFilter;

                return matchesSearch && matchesCountry && matchesRating;
            });

            // Sort results
            filteredBarbershops.sort((a, b) => {
                switch (sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'rating':
                        return b.rating - a.rating;
                    case 'reviews':
                        return b.total_ratings - a.total_ratings;
                    case 'country':
                        return a.country.localeCompare(b.country);
                    default:
                        return 0;
                }
            });

            currentPage = 1;
            itemsPerPage = parseInt(document.getElementById('resultsPerPage').value);
            displayResults();
        }

        function displayResults() {
            const grid = document.getElementById('barbershopGrid');
            const resultsCount = document.getElementById('resultsCount');
            const noResults = document.getElementById('noResults');

            if (filteredBarbershops.length === 0) {
                grid.innerHTML = '';
                resultsCount.style.display = 'none';
                noResults.style.display = 'block';
                document.getElementById('pagination').innerHTML = '';
                return;
            }

            noResults.style.display = 'none';
            resultsCount.style.display = 'block';
            resultsCount.textContent = `Showing ${filteredBarbershops.length} barbershop${filteredBarbershops.length !== 1 ? 's' : ''}`;

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredBarbershops.length);
            const pageResults = filteredBarbershops.slice(startIndex, endIndex);

            grid.innerHTML = pageResults.map(barbershop => createBarbershopCard(barbershop)).join('');
            createPagination();
        }

        function createBarbershopCard(barbershop) {
            const stars = '★'.repeat(Math.floor(barbershop.rating)) + '☆'.repeat(5 - Math.floor(barbershop.rating));
            const priceLevel = '$'.repeat(barbershop.price_level || 1);
            
            return `
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3>${barbershop.name}</h3>
                            <div class="rating">
                                <span class="stars">${stars}</span>
                                <span class="rating-text">${barbershop.rating} (${barbershop.total_ratings} reviews)</span>
                            </div>
                        </div>
                        <span class="country-badge country-${barbershop.country.toLowerCase()}">${barbershop.country}</span>
                    </div>
                    
                    <div class="card-info">
                        <div class="info-item">
                            <span class="icon">📍</span>
                            <span>${barbershop.address}</span>
                        </div>
                        ${barbershop.phone ? `
                            <div class="info-item">
                                <span class="icon">📞</span>
                                <span>${barbershop.phone}</span>
                            </div>
                        ` : ''}
                        <div class="info-item">
                            <span class="icon">💰</span>
                            <span>Price Level: ${priceLevel}</span>
                        </div>
                        <div class="info-item">
                            <span class="icon">${barbershop.open_now ? '🟢' : '🔴'}</span>
                            <span>${barbershop.open_now ? 'Open Now' : 'Closed'}</span>
                        </div>
                    </div>

                    <div class="card-actions">
                        <button class="btn btn-small" onclick="showDetails('${barbershop.place_id}')">View Details</button>
                        ${barbershop.website ? `<a href="${barbershop.website}" target="_blank" class="btn btn-small btn-secondary">Visit Website</a>` : ''}
                    </div>
                </div>
            `;
        }

        function createPagination() {
            const totalPages = Math.ceil(filteredBarbershops.length / itemsPerPage);
            const pagination = document.getElementById('pagination');

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let paginationHTML = '';

            // Previous button
            paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>‹ Previous</button>`;

            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);

            if (startPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changePage(1)">1</button>`;
                if (startPage > 2) paginationHTML += `<span>...</span>`;
            }

            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) paginationHTML += `<span>...</span>`;
                paginationHTML += `<button class="page-btn" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            // Next button
            paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Next ›</button>`;

            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredBarbershops.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                displayResults();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function showDetails(placeId) {
            const barbershop = allBarbershops.find(b => b.place_id === placeId);
            if (!barbershop) return;

            const modal = document.getElementById('detailModal');
            const modalContent = document.getElementById('modalContent');

            const stars = '★'.repeat(Math.floor(barbershop.rating)) + '☆'.repeat(5 - Math.floor(barbershop.rating));

            modalContent.innerHTML = `
                <h2>${barbershop.name}</h2>
                <div class="rating" style="margin-bottom: 20px;">
                    <span class="stars">${stars}</span>
                    <span class="rating-text">${barbershop.rating} (${barbershop.total_ratings} reviews)</span>
                </div>

                <div class="detail-section">
                    <h4>📍 Address</h4>
                    <p>${barbershop.address}</p>
                </div>

                ${barbershop.phone ? `
                    <div class="detail-section">
                        <h4>📞 Phone</h4>
                        <p>${barbershop.phone}</p>
                    </div>
                ` : ''}

                ${barbershop.website ? `
                    <div class="detail-section">
                        <h4>🌐 Website</h4>
                        <p><a href="${barbershop.website}" target="_blank">${barbershop.website}</a></p>
                    </div>
                ` : ''}

                <div class="detail-section">
                    <h4>🕒 Hours</h4>
                    <p>${barbershop.hours ? barbershop.hours.replace(/; /g,